# 操作系统

**一、什么是操作系统？**

答：操作系统是软件程序。

​	BIOS在加电之后自动将操作系统代码从磁盘读入内存后运行，在这个过程中，伴随着一些数据结构的生成，它们是关于硬件设备的信息，操作系统通过它们来**感知和管理计算机硬件**。操作系统屏蔽掉了丑陋的底层细节，只为上层的应用程序提供美丽整齐的接口。

**二、什么是系统调用？调用的流程**

答：系统调用函数是操作系统和应用程序之间的接口。

​	应用程序大多数时间运行在用户态，遇到了与系统资源相关的操作就要进入内核态，而系统调用是从用户态进入内核态的唯一合法途径，进入内核态才能使用内核指令，进而控制硬件。

应用程序函数--------系统调用函数------->库函数（能展成含有中断的代码，通过中断进入内核）------->调用内核里的指令控制硬件

**三、操作系统如何管理CPU？**

答：进程的切换。

​	每个进程都有一个存放信息的结构PCB记录它的执行情况、地址空间映射等新信息。操作系统只要把这些PCB记录好(形成队列)，按照合理的次序调度推进就形成了多进程图像，就完成了CPU的管理。CPU忙碌起来了，计算机才能快，外设才能被充分带动。

**四、程序与进程的区别？**

答：程序编译好后存放在磁盘上的固定指令序列，进程是装入内存中的执行着的程序。

​	它们是不一样的，程序是死的静态概念，进程能够走走停停，来回切换，有开始与结束是动态概念，并且它们的所有不一样都存放在PCB(进程控制块)这个数据结构中。

**五、进程与线程的联系与区别？**

答：一个进程中可以包含多个线程，线程像是一种轻量级的进程。

​	进程之间会发生**调度且倾向于独立**，每个进程都有自己单独的程序计数器PC，地址空间映射表，文件句柄等大量数据结构，因此进程的切换要切换上述的所有信息。地址空间分离避免了在内存中产生冲突。

​	而线程之间也会**调度但更倾向于合作**，因此线程会共享进程范围内大量的地址空间资源。每个线程仅有自己的程序计数器PC和运行时栈及栈中的变量，线程的切换只会切换PC和栈。这些线程能访问到相同的变量，并在同一个堆上分配对象。

**六、线程的状态有哪些？**

答：新，就，运，阻，终。

​	以java为例。新建状态对应着线程对象刚刚被创建，还没有执行。此时调用线程的start()方法，会进入就绪状态，代表该线程开始进入队列开始申请CPU时间片。当线程获得CPU时间后，它才进入运行状态，真正开始执行run()方法。该线程并未结束，但由于某些原因让出了CPU时间片，此时进入阻塞状态。线程自然结束或者发生了未捕获的异常后，称为终止状态。

**注意：**进入阻塞状态和就绪状态的条件往往相反，如：IO的发生与返回，sleep()睡着了与睡醒了，同步锁的索要与获得，等待与收到通知。

**七、进程间通信的方式？**

答：进程可以通过 信号、信号量、管道、套接字，共享内存、消息队列的方式通信协作。

**信号**被某个进程产生，并设置此信号传递的对象(pid)，然后传递给操作系统；操作系统根据接收进程的设置（是否阻塞）而选择性的发送给接收者，目的进程接收到此信号后，保存上下文转而执行对应的中断服务程序，执行完成后再返回。

**信号量**是一些共享数据，每个进程生产或消费资源时修改信号量，信号量符合要求时进程才能推进，用来完成与其他进程之间的同步。

**管道**的实质是一个缓冲区，进程以严格的先进先出的方式从缓冲区存取数据。匿名管道是在内存中，只能在有亲缘关系的进程间通信；有名管道以磁盘文件的方式存在，可以实现本机任意两个进程通信。

**消息队列**是不同进程消息存放的队列，可以实现消息的随机查询克服了信号承载信息量少，管道只能承载无格式字节流以及缓冲区大小受限等缺点

 **套接字(socket)** 是一种通信机制，客户端/服务端进程的通信既可以在本地单机上进行，也可以跨网络进行。也就是说它可以让同一计算机上的进程通信，也可以让不在同一台计算机但通过网络连接计算机上的进程进行通信。



